<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flores y Mensaje Especial</title>

    <style>
        body {
            margin: 0;
            height: 100vh;
            background-color: #000;
            cursor: pointer;
            overflow: hidden;
            font-family: "Georgia", serif;
        }

        canvas {
            position: absolute;
            pointer-events: none;
        }

        /* ---- MENSAJE ---- */
        .mensaje {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #ffffffd0;
            text-align: center;
            width: 80%;
            max-width: 600px;
            font-size: 1.4rem;
            opacity: 1;
            transition: opacity 2s ease;
            pointer-events: none;
        }

        /* ---- PASTEL SECRETO ---- */
        .secret-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 90px;
            height: 90px;
            font-size: 3rem;
            border-radius: 50%;
            border: none;
            background: #ffffff22;
            color: white;
            cursor: pointer;
            transition: 0.3s;
            backdrop-filter: blur(4px);
        }

        .secret-btn:hover {
            background: #ffffff44;
        }
    </style>
</head>
<body>

    <!-- M칔SICA DE FONDO -->
    <audio src="musica_relax.mp3" autoplay loop></audio>

    <!-- MENSAJE CENTRAL -->
    <div id="mensaje" class="mensaje">
        Hay personas que vuelven m치s c치lido todo lo que tocan, sin hacer esfuerzo alguno.<br>
        T칰 eres una de ellas.
    </div>

    <!-- BOT칍N SECRETO (PASTEL) -->
    <button class="secret-btn" onclick="activarSecreto()">游꾹</button>

    <script>

        /* ---------------- BOT칍N SECRETO ------------------- */

        const contrase침aCorrecta = "satarno_infinito";

        function activarSecreto() {
            const clave = prompt("Ingresa la contrase침a secreta:");
            if (clave === contrase침aCorrecta) {
                animacionEspecial();
            } else {
                alert("Contrase침a incorrecta.");
            }
        }

        function animacionEspecial() {
            for (let i = 0; i < 12; i++) {
                setTimeout(() => {
                    createFlower(
                        Math.random() * window.innerWidth,
                        Math.random() * window.innerHeight
                    );
                }, i * 300);
            }
        }

        /* ---------------- CLASE TURTLE ------------------- */

        class Turtle {
            constructor(ctx, startX, startY) {
                this.ctx = ctx;
                this.x = startX;
                this.y = startY;
                this.angle = 0;
                this.penDown = true;
                this.penColor = '#FFFFFF';
                this.penSize = 1;
                this.ctx.lineCap = 'round';
                this.ctx.lineJoin = 'round';
            }
            penup() { this.penDown = false; }
            pendown() { this.penDown = true; }
            right(deg) { this.angle = (this.angle + deg) % 360; }
            left(deg) { this.angle = (this.angle - deg + 360) % 360; }
            pensize(w) { this.penSize = w; this.ctx.lineWidth = w; }
            color(color) { 
                this.penColor = color; 
                this.ctx.strokeStyle = this.penColor; 
            }
            forward(dist) {
                const rad = this.angle * Math.PI / 180;
                const newX = this.x + dist * Math.cos(rad);
                const newY = this.y - dist * Math.sin(rad);
                if (this.penDown) {
                    this.ctx.beginPath();
                    this.ctx.moveTo(this.x, this.y);
                    this.ctx.lineTo(newX, newY);
                    this.ctx.stroke();
                }
                this.x = newX;
                this.y = newY;
            }
            circle(radius, extent = 360) {
                const absRadius = Math.abs(radius);
                const clockwise = radius < 0;
                const numSteps = Math.min(360, Math.max(36, Math.floor(absRadius)));
                const theta = extent / numSteps;
                const turnDir = clockwise ? this.right.bind(this) : this.left.bind(this);
                const sideLength = 2 * absRadius * Math.sin(Math.PI / numSteps);
                for (let i = 0; i < numSteps; i++) {
                    this.forward(sideLength);
                    turnDir(theta);
                }
            }
        }

        /* ---------------- DIBUJAR FLOR ------------------- */

        function drawFlower(ctx, centerX, centerY, scale = 1) {
            function createTurtle(color) {
                const t = new Turtle(ctx, centerX, centerY);
                t.color(color);
                return t;
            }

            function drawCircles(t, initialSize, repeat, count, decrement) {
                for (let i = 0; i < repeat; i++) {
                    let size = initialSize;
                    for (let j = 0; j < count; j++) {
                        t.circle(size);
                        size -= decrement;
                    }
                    t.right(360 / repeat);
                }
            }

            drawCircles(createTurtle('white'), 75 * scale, 10, 10, 2 * scale);
            drawCircles(createTurtle('yellow'), 65 * scale, 10, 4, 5 * scale);
            drawCircles(createTurtle('blue'), 55 * scale, 10, 4, 2.5 * scale);
            drawCircles(createTurtle('red'), 40 * scale, 10, 4, 9.5 * scale);
            drawCircles(createTurtle('green'), 20 * scale, 10, 4, 10 * scale);
        }

        /* ---------------- CREAR UNA FLOR ------------------- */

        let mensajeOculto = false;

        function createFlower(x, y) {
            if (!mensajeOculto) {
                document.getElementById("mensaje").style.opacity = 0;
                mensajeOculto = true;
            }

            const screenWidth = window.innerWidth;
            let canvasSize = 300;
            let center = 150;
            let scale = 1;

            if (screenWidth < 768) { canvasSize = 200; center = 100; scale = 0.67; }
            if (screenWidth < 480) { canvasSize = 150; center = 75; scale = 0.5; }

            const canvas = document.createElement('canvas');
            canvas.width = canvasSize;
            canvas.height = canvasSize;
            canvas.style.left = `${x}px`;
            canvas.style.top = `${y}px`;
            canvas.style.transform = 'translate(-50%, -50%) scale(0) rotate(0deg)';
            canvas.style.opacity = 1;
            canvas.style.transition = 'transform 2s ease-in-out, opacity 2s ease-in-out';
            canvas.style.position = 'absolute';

            const ctx = canvas.getContext('2d');
            document.body.appendChild(canvas);

            drawFlower(ctx, center, center, scale);

            setTimeout(() => {
                canvas.style.transform = 'translate(-50%, -50%) scale(1) rotate(360deg)';
                canvas.style.opacity = 0;
            }, 10);

            setTimeout(() => {
                canvas.remove();
            }, 2000);
        }

        /* ---------------- CLICK PARA FLORES ------------------- */

        let canClick = true;
        document.addEventListener('click', function(event) {
            if (canClick) {
                createFlower(event.clientX, event.clientY);
                canClick = false;
                setTimeout(() => { canClick = true; }, 1000);
            }
        });
    </script>
</body>
</html>
